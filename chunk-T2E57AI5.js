import{a as q,b as R,c as P,d as Z,e as z,f as G}from"./chunk-BTXJ7LJE.js";import{a as H}from"./chunk-65C4XMB2.js";import{$ as B,C as c,D as o,E as l,F as k,G as N,H as m,I as p,O as d,P as L,Q as h,S as E,T as F,U as O,W as V,Y as u,aa as x,ea as A,fa as D,ga as T,ia as W,ka as j,l as S,m as _,n as b,o as M,s as a,v as y,z as C}from"./chunk-R52FXVEV.js";var Q=()=>[1,2,3,4,5];function U(n,r){n&1&&k(0,"div",8)}function X(n,r){n&1&&(o(0,"div",5)(1,"div",6),C(2,U,1,0,"div",7),l()()),n&2&&(a(2),c("ngForOf",V(1,Q)))}function Y(n,r){if(n&1&&(o(0,"div",5)(1,"div",9)(2,"span",10),d(3),l()()()),n&2){let s,t=p();a(3),L((s=t.error())==null?null:s.message)}}function $(n,r){if(n&1){let s=N();o(0,"div",11)(1,"div",12)(2,"span",13),d(3),l(),o(4,"div",14)(5,"select",15),O("ngModelChange",function(e){_(s);let i=p();return F(i.sortType,e)||(i.sortType=e),b(e)}),m("ngModelChange",function(){_(s);let e=p();return b(e.onSortTypeChange())}),o(6,"option",16),d(7,"A-Z"),l(),o(8,"option",17),d(9,"1-9"),l()(),o(10,"button",18),m("click",function(){_(s);let e=p();return b(e.toggleSort())}),d(11),l()()()()}if(n&2){let s=p();a(3),h("",s.sortedSongs().length," slogams"),a(2),E("ngModel",s.sortType),a(6),h(" Sort ",s.sortOrder()==="asc"?"\u2193":"\u2191"," ")}}function ee(n,r){if(n&1){let s=N();o(0,"div",21),m("click",function(){let e=_(s).$implicit,i=p(2);return b(i.onSongSelect(i.getOriginalIndex(e)))}),o(1,"div",22),d(2),l()()}if(n&2){let s=r.$implicit;a(2),h(" ",s.info," ")}}function te(n,r){if(n&1&&(o(0,"div",19),C(1,ee,3,1,"div",20),l()),n&2){let s=p();a(),c("ngForOf",s.sortedSongs())("ngForTrackBy",s.trackBySong)}}function ne(n,r){n&1&&(o(0,"div",23)(1,"h3",24),d(2,"No slogams found"),l(),o(3,"p",25),d(4,"There are no slogams available in this collection."),l()())}var J=(()=>{let r=class r{constructor(){this.title=x.required(),this.songs=x.required(),this.isLoading=x(!1),this.error=x(null),this.songSelected=B(),this.sortOrder=M("asc"),this.sortType=M("alphabetical"),this.sortedSongs=u(()=>{let t=this.songs(),e=this.sortOrder(),i=this.sortType();return[...t].sort((f,v)=>{let g=0;if(i==="numeric"){let w=this.extractLeadingNumber(f.info),I=this.extractLeadingNumber(v.info);w!==null&&I!==null?g=w-I:w!==null?g=-1:I!==null?g=1:g=f.info.localeCompare(v.info)}else g=f.info.localeCompare(v.info);return e==="asc"?g:-g})})}extractLeadingNumber(t){let e=t.match(/^(\d+(?:\.\d+)?)/);return e?parseFloat(e[1]):null}toggleSort(){this.sortOrder.set(this.sortOrder()==="asc"?"desc":"asc")}onSortTypeChange(){}getOriginalIndex(t){return this.songs().findIndex(e=>e.info===t.info&&e.head===t.head)}onSongSelect(t){this.songSelected.emit(t)}trackBySong(t,e){return e.head+e.info}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=y({type:r,selectors:[["app-songs-table"]],inputs:{title:[1,"title"],songs:[1,"songs"],isLoading:[1,"isLoading"],error:[1,"error"]},outputs:{songSelected:"songSelected"},decls:6,vars:5,consts:[[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","overflow-hidden"],["class","p-6",4,"ngIf"],["class","p-6 border-b border-gray-100 bg-gray-50",4,"ngIf"],["class","divide-y divide-gray-100",4,"ngIf"],["class","p-16 text-center",4,"ngIf"],[1,"p-6"],[1,"animate-pulse","space-y-6"],["class","h-20 bg-gray-200 rounded-lg",4,"ngFor","ngForOf"],[1,"h-20","bg-gray-200","rounded-lg"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4"],[1,"text-red-800","font-medium"],[1,"p-6","border-b","border-gray-100","bg-gray-50"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-700"],[1,"flex","items-center","space-x-3"],[1,"text-xs","border","border-gray-300","rounded","px-2","py-1","bg-white",3,"ngModelChange","ngModel"],["value","alphabetical"],["value","numeric"],[1,"text-sm","text-blue-600","hover:text-blue-800","font-medium","transition-colors","duration-150",3,"click"],[1,"divide-y","divide-gray-100"],["class","group p-8 hover:bg-blue-50 cursor-pointer transition-all duration-200 border-l-4 border-transparent hover:border-blue-500",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"group","p-8","hover:bg-blue-50","cursor-pointer","transition-all","duration-200","border-l-4","border-transparent","hover:border-blue-500",3,"click"],[1,"p-10"],[1,"p-16","text-center"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-500"]],template:function(e,i){e&1&&(o(0,"div",0),C(1,X,3,2,"div",1)(2,Y,4,1,"div",1)(3,$,12,3,"div",2)(4,te,2,2,"div",3)(5,ne,5,0,"div",4),l()),e&2&&(a(),c("ngIf",i.isLoading()),a(),c("ngIf",i.error()),a(),c("ngIf",i.songs().length>0&&!i.isLoading()),a(),c("ngIf",i.songs().length>0&&!i.isLoading()),a(),c("ngIf",i.songs().length===0&&!i.isLoading()&&!i.error()))},dependencies:[T,A,D,G,Z,z,P,q,R],encapsulation:2});let n=r;return n})();var fe=(()=>{let r=class r{constructor(){this.route=S(W),this.router=S(j),this.musicService=S(H),this.chapterNumber=u(()=>this.route.snapshot.paramMap.get("chapterNumber")||""),this.songs=u(()=>{let t=this.chapterNumber();return this.musicService.getSongsForChapter(t)}),this.isLoading=u(()=>{let t=this.chapterNumber();return this.musicService.isChapterLoading(t)}),this.error=u(()=>{let t=this.chapterNumber();return this.musicService.getChapterError(t)})}onSongSelected(t){let e=this.chapterNumber();this.router.navigate(["/song",e,t])}goBack(){this.router.navigate(["/chapters"])}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=y({type:r,selectors:[["app-chapter-detail"]],decls:9,vars:5,consts:[[1,"min-h-screen","bg-gray-50"],[1,"max-w-4xl","mx-auto","px-4","py-8"],[1,"mb-8"],[1,"inline-flex","items-center","px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-lg","hover:bg-gray-50","transition-colors","duration-150",3,"click"],[1,"mb-8","text-center"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[3,"songSelected","title","songs","isLoading","error"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),m("click",function(){return i.goBack()}),d(4," \u2190 Back to All Chapters "),l()(),o(5,"div",4)(6,"h1",5),d(7),l()(),o(8,"app-songs-table",6),m("songSelected",function(v){return i.onSongSelected(v)}),l()()()),e&2&&(a(7),h("Chapter ",i.chapterNumber()),a(),c("title","Chapter "+i.chapterNumber()+" Slogams")("songs",i.songs())("isLoading",i.isLoading())("error",i.error()))},dependencies:[T,J],encapsulation:2});let n=r;return n})();export{fe as ChapterDetailComponent};
